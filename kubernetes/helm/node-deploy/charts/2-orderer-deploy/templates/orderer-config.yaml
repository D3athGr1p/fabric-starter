{{ range $ordererName := split "," .Values.ordererNames }}
  {{- $ordererValues := dict "ordererName" $ordererName "domain" $.Values.domain "ordererDomain" $.Values.ordererDomain "certificatePathes" $.Values.orderer.certificatePathes "Values" (dict "ordererName" $ordererName) -}}

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: orderer-{{ include "orderer.nameDomain" $ordererValues }}
data:
  processor.timeout: '1'
  cnft.wallet.address: 'http://egress-nginx.${NAMESPACE}.svc:8088/cnft-gate'
  dfa.integration.service.port: '9185'

  DFA_INTEGRATION_JAVA_TOOL_OPTIONS: '-XX:InitialRAMPercentage=50.0 -XX:MaxRAMPercentage=95.0  -Dfile.encoding=UTF-8'

  ORDERER_GENERAL_LISTENADDRESS: '0.0.0.0'
  ORDERER_GENERAL_GENESISMETHOD: 'file'
  ORDERER_GENERAL_BOOTSTRAPFILE: '/etc/hyperledger/channel-artifacts/genesis.block'

  ORDERER_GENERAL_LOCALMSPID: {{ include "orderer.nameDomain" $ordererValues }}
  ORDERER_GENERAL_LOCALMSPDIR: /etc/hyperledger/crypto-config/ordererOrganizations/{{ $.Values.domain }}/orderers/{{ include "orderer.nameDomain" $ordererValues }}/msp
  ORDERER_GENERAL_LISTENPORT: "{{ $.Values.ordererPort }}"

  ORDERER_GENERAL_TLS_PRIVATEKEY: /etc/hyperledger/crypto-config/ordererOrganizations/{{ $.Values.domain }}/orderers/{{ include "orderer.nameDomain" $ordererValues }}/tls/server.key
  ORDERER_GENERAL_TLS_CERTIFICATE: /etc/hyperledger/crypto-config/ordererOrganizations/{{ $.Values.domain }}/orderers/{{ include "orderer.nameDomain" $ordererValues }}/tls/server.crt
  ORDERER_GENERAL_TLS_ROOTCAS: /etc/hyperledger/crypto-config/ordererOrganizations/{{ $.Values.domain }}/orderers/{{ include "orderer.nameDomain" $ordererValues }}/tls/ca.crt
  ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE: /etc/hyperledger/crypto-config/ordererOrganizations/{{ $.Values.domain }}/orderers/{{ include "orderer.nameDomain" $ordererValues }}/tls/server.crt
  ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY: /etc/hyperledger/crypto-config/ordererOrganizations/{{ $.Values.domain }}/orderers/{{ include "orderer.nameDomain" $ordererValues }}/tls/server.key

{{ end }}